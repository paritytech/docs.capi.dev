"use strict";(self.webpackChunkdocs_capi_dev_2=self.webpackChunkdocs_capi_dev_2||[]).push([[665],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>v});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=r.createContext({}),l=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=l(e.components);return r.createElement(p.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,p=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=l(n),m=a,v=u["".concat(p,".").concat(m)]||u[m]||d[m]||i;return n?r.createElement(v,o(o({ref:t},c),{},{components:n})):r.createElement(v,o({ref:t},c))}));function v(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=m;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[u]="string"==typeof e?e:a,o[1]=s;for(var l=2;l<i;l++)o[l]=n[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},3276:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var r=n(7462),a=(n(7294),n(3905));const i={},o="Build Tool Integration",s={unversionedId:"setup/build_tool_integration",id:"setup/build_tool_integration",title:"Build Tool Integration",description:"If you wish to use Capi's development network orchestrator, it's important that",source:"@site/docs/setup/build_tool_integration.md",sourceDirName:"setup",slug:"/setup/build_tool_integration",permalink:"/setup/build_tool_integration",draft:!1,editUrl:"https://github.com/paritytech/docs.capi.dev/tree/main/docs/setup/build_tool_integration.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Development Networks",permalink:"/setup/development_nets"},next:{title:"Basics",permalink:"/basics/"}},p={},l=[{value:"Vite",id:"vite",level:2},{value:"Webpack",id:"webpack",level:2}],c={toc:l},u="wrapper";function d(e){let{components:t,...n}=e;return(0,a.kt)(u,(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"build-tool-integration"},"Build Tool Integration"),(0,a.kt)("p",null,"If you wish to use Capi's development network orchestrator, it's important that\nyour build tool pipe the necessary environment variables from Capi's server\nprocess into your application."),(0,a.kt)("p",null,"Consider the following Capi server instantiation."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"capi serve -- <your-cmd-here>\n")),(0,a.kt)("p",null,"In this example, we start the Capi server, which runs everything after the ",(0,a.kt)("inlineCode",{parentName:"p"},"--"),",\npassing in ",(0,a.kt)("inlineCode",{parentName:"p"},"CAPI_SERVER")," as an environment variable. In the case that you\nspecify a target for devnet-swapping, it will also pass ",(0,a.kt)("inlineCode",{parentName:"p"},"CAPI_TARGET"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"capi serve --target dev -- your-cmd-here\n")),(0,a.kt)("p",null,"To recap:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"CAPI_SERVER"),": the URL of the running Capi server"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"CAPI_TARGET"),": the ",(0,a.kt)("inlineCode",{parentName:"li"},"--target")," with which the Capi server was instantiated")),(0,a.kt)("h2",{id:"vite"},"Vite"),(0,a.kt)("p",null,"Configure your development task such that it instantiates the Capi server and\npasses in your Vite development command."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"capi serve --target dev -- vite\n")),(0,a.kt)("p",null,"The resulting ",(0,a.kt)("inlineCode",{parentName:"p"},"vite")," process will have the environment variables. However, the\n",(0,a.kt)("inlineCode",{parentName:"p"},"vite.config.ts")," needs to specify that those variables are to be used by the\nVite development server."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},'import { defineConfig } from "vite"\n\nexport default defineConfig({\n  define: {\n    "process.env.CAPI_SERVER": process.env.CAPI_SERVER,\n    "process.env.CAPI_TARGET": process.env.CAPI_TARGET,\n  },\n})\n')),(0,a.kt)("h2",{id:"webpack"},"Webpack"),(0,a.kt)("p",null,"Configure your development task such that it instantiates the Capi server and\npasses in your webpack development command."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"capi serve --target dev -- webpack serve\n")),(0,a.kt)("p",null,"The shape of Webpack configurations varies greatly. If the following approach\ndoesn't work for you, please\n",(0,a.kt)("a",{parentName:"p",href:"https://github.com/paritytech/capi/issues/new"},"submit an issue")," for guidance\n(preferably with a simple reproduction). Such issues will help us improve this\ndoc for future users."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"import webpack from \"webpack\"\n\nexport default {\n  externals: {\n    'node:fs': {},\n  },\n  plugins: [\n    new webpack.DefinePlugin({\n      process: {\n        env: {\n          CAPI_SERVER: JSON.stringify(process.env.CAPI_SERVER),\n          CAPI_TARGET: JSON.stringify(process.env.CAPI_TARGET),\n        },\n      },\n    }),\n  ],\n}\n")))}d.isMDXComponent=!0}}]);